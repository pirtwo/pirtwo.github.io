!function(t){var e={};function r(l){if(e[l])return e[l].exports;var s=e[l]={i:l,l:!1,exports:{}};return t[l].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,l){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:l})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(l,s,function(e){return t[e]}.bind(null,s));return l},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=21)}({1:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));class l{constructor(t,e,r){this.rowNum=t,this.colNum=e,this.cells=r||new Array(t*e)}*[Symbol.iterator](){let t=0;for(let e=0;e<this.cells.length;e++)t++,yield{row:Math.floor(e/this.rowNum),col:e-Math.floor(e/this.rowNum)*this.colNum,value:this.cells[e]};return t}*rows(){let t=0;for(let e=0;e<this.rowNum;e++)t++,yield this.cells.slice(e*this.colNum,e*this.colNum+this.colNum);return t}*cols(){let t=0;for(let e=0;e<this.colNum;e++)t++,yield this.cells.filter((t,r)=>(r-e)%this.colNum==0);return t}fill(t){return Array.isArray(t)?t.forEach((t,e)=>this.cells[e]=t):this.cells.fill(t),this}swap(t,e,r,l){return[this.cells[t*this.colNum+e],this.cells[r*this.colNum+l]]=[this.cells[r*this.colNum+l],this.cells[t*this.colNum+e]],this}clone(){return new l({rowNum:this.rowNum,colNum:this.colNum,cells:this.cells.slice(0)})}getCell(t,e){return this.cells[t*this.colNum+e]}setCell(t,e,r){return this.cells[t*this.colNum+e]=r,this}}},2:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));class l{constructor({row:t,col:e,state:r,player:l}){this.row=t,this.col=e,this.player=l,this.state=r,this.score=void 0}}},21:function(t,e,r){"use strict";r.r(e);var l=r(1);class s{constructor(t="",e="",r=null){this.state=t,this.player=e,this.parent=r}static getWinner(t){let e=new l.a(3,3,t.split("")),r=[...e].filter(t=>t.row==t.col),s=[...e].filter(t=>t.row==Math.abs(t.col-(e.colNum-1)));for(const t of e.rows()){if(t.every(t=>"x"==t))return"x";if(t.every(t=>"o"==t))return"o"}for(const t of e.cols()){if(t.every(t=>"x"==t))return"x";if(t.every(t=>"o"==t))return"o"}return r.every(t=>"x"==t.value)||s.every(t=>"x"==t.value)?"x":r.every(t=>"o"==t.value)||s.every(t=>"o"==t.value)?"o":null}static getRival(t){return"x"===t?"o":"x"}isTerminal(){return null!==s.getWinner(this.state)||!this.state.split("").includes("0")}getValue(){let t=s.getWinner(this.state);return"x"==t?1:"o"==t?-1:0}getChilds(){let t,e=[],r=this.state.split("");return r.forEach((l,o)=>{if("0"===l){let l=r.slice(0);t=new s,t.parent=this,t.player=s.getRival(this.player),l[o]=t.player,t.state=l.join(""),e.push(t)}}),e}}var o=r(2);function i(t,e,r){let l;return 0==r||t.isTerminal()?t.getValue():("max"==e&&(l=-1/0,t.getChilds().forEach(t=>{l=Math.max(l,i(t,"min",r-1))})),"min"==e&&(l=1/0,t.getChilds().forEach(t=>{l=Math.min(l,i(t,"max",r-1))})),l)}onmessage=t=>{if(t.data.start){const{state:e,player:r,thoughtDepth:n}=t.data,c=e.split(""),u=new l.a(3,3,e.split(""));let a=[];for(const t of u)if("0"===t.value){const e=c.slice(0);e[3*t.row+t.col]=r;const l=new s(e.join(""),r),u=new o.a({row:t.row,col:t.col,state:l.state,player:l.player});u.score=i(l,"x"===r?"min":"max",n),a.push(u)}a=function(t){let e=t.slice(0);for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}(a);let h=a.find(t=>"x"===r?t.score===Math.max.apply({},a.map(t=>t.score)):t.score===Math.min.apply({},a.map(t=>t.score)));postMessage({success:!0,bestMove:{row:h.row,col:h.col}})}}}});